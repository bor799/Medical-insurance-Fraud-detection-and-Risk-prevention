# 医疗保险欺诈检测系统开发文档

## 数据分析环节

### 1. 相关性分析
#### 1.1 实现功能
- Spearman相关系数矩阵计算
- FDR校正的显著性检验
- 相关性热力图可视化
- 相关系数矩阵导出(CSV和LaTeX格式)

#### 1.2 可视化规范
- 图表尺寸：10cm × 10cm
- 字体大小：
  * 主标题：30pt，加粗，深灰色(#333)
  * 轴标签：30pt，45度旋转
  * 相关系数：25pt
  * 样本量说明：25pt，浅灰色(#666)
- 配色方案：
  * 使用RdBu_r配色
  * 强相关(|r| > 0.5)：白色文字
  * 弱相关：黑色文字
- 特殊标注：
  * 欺诈标签列：红色虚线框
  * 高相关(|r| > 0.8)：金色边框

### 2. 异常值分析
#### 2.1 实现功能
- 每个特征生成两个图：
  * Hexbin密度图：显示异常值分布
  * Q-Q图：检验正态性
- 异常值界限计算(IQR方法)
- 异常样本ID导出
- 异常模式分析报告

#### 2.2 可视化规范
- 图表尺寸：24cm × 10cm
- 字体大小：
  * 主标题：30pt
  * 轴标签：30pt
  * 刻度标签：25pt
- Hexbin图配置：
  * 使用Blues配色
  * 对数刻度显示
  * 红色虚线标注异常边界
- Q-Q图配置：
  * 深蓝色散点
  * 红色参考线
  * 点大小：8pt

### 3. 组间差异检验
#### 3.1 实现功能
- Mann-Whitney U检验
- 效应量计算
- FDR校正
- LaTeX格式结果表格

#### 3.2 输出规范
- 检验统计量
- 原始p值和校正后p值
- 效应量
- 各组描述统计量
- 显著性标记(* p<0.05, ** p<0.01)

### 4. 输出文件结构
```
output/
├── figures/
│   ├── correlation/
│   │   ├── correlation_heatmap.png    # 相关性热力图
│   │   ├── correlation_matrix.csv     # 相关系数矩阵
│   │   └── correlation_table.tex      # LaTeX格式表格
│   └── outliers/
│       ├── {feature}_analysis.png     # 异常值分析图
│       ├── {feature}_outliers.csv     # 异常样本ID
│       └── outliers_report.txt        # 异常值分析报告
└── evaluation/
    └── group_difference_test.txt      # 组间差异检验结果
```

### 5. 注意事项
- 所有图表需确保清晰可读
- 重要发现需在报告中突出显示
- 异常值分析至少标注3个典型模式
- 相关性分析需重点关注与欺诈标签的关系

## 项目结构
```
0222modelcode/
├── config/                 # 配置文件目录
│   ├── base_config.py     # 基础配置（路径、随机种子等）
│   └── model_config.py    # 模型相关配置
├── utils/                 # 工具函数目录
│   ├── logger.py         # 日志工具
│   └── visualization.py  # 可视化工具
├── models/               # 模型实现目录
│   ├── logistic.py      # 逻辑回归模型
│   ├── random_forest.py # 随机森林模型
│   ├── xgboost_model.py # XGBoost模型
│   └── dnn.py          # 深度神经网络模型
├── evaluation/          # 评估结果目录
│   ├── metrics/        # 评估指标
│   ├── curves/         # 学习曲线
│   └── importance/     # 特征重要性
├── logs/               # 日志目录
└── output/             # 模型输出目录
    ├── models/         # 保存的模型文件
    └── figures/        # 生成的图表

## 开发进程记录

### [2024-02-22] 项目初始化
1. 创建项目基本结构
2. 设置配置文件系统
3. 实现日志记录功能

### 待完成任务
1. 数据探索性分析
   - Spearman相关性分析
   - 异常值检测
   - 组间差异检验
2. 模型开发与训练
3. 模型评估与可视化
4. 风险防范策略生成
```

## 技术规范
1. 随机种子固定为42
2. 所有图表支持中文显示
3. 评估指标统一保存为txt格式
4. 训练过程记录包含时间和资源消耗

## 数据集信息
- 训练集：210,000样本
- 验证集：45,000样本
- 测试集：45,000样本
- 特征数：11个（7个数值特征，4个类别特征）
- 正负样本比例：约1:10
